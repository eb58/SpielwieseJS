<!DOCTYPE html>
<html>
  <head>
    <title>TODO supply a title</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="/lib/jQueryUI-1.11.4/jquery-ui.css">
    <link rel="stylesheet" href="/css/ebselect.css">

    <script src="/lib/underscore-1.8.3/underscore-1.8.3.js"></script>
    <script src="/lib/jquery-1.11.3/jquery-1.11.3.js"></script>
    <script src="/lib/jQueryUI-1.11.4/jquery-ui.js"></script>
    <script src="/js/ebselect.js"></script>

    <script>
      $(document).ready(function () {
        $.fn.ebselect.onselchange1 = function (a) {
          console.log('selchange:', a.id, a.value);
          var res = _.reduce($('.ebselect input:checked'), function (acc, o) {
            acc.push(o.value);
            return acc;
          }, []).join(',');
          $("input[name=SpecialFeatureList]").val(res);
        };
        $.fn.ebselect.onselchange2 = function (a) {
          console.log('selchange:', a.id, a.value);
          var res = _.reduce($('.ebselect input:checked'), function (acc, o) {
            acc.push(o.value);
            return acc;
          }, []).join(',');
          $("input[name=SpecialFeatureList]").val(res);
        };
        var opts1 = {
          selectoptions: [
            {value: '1', label: 'Besonderheit1'},
            {value: '2', label: 'Besonderheit2'},
            {value: '3', label: 'Besonderheit3'},
            {value: '4', label: 'Besonderheit4'},
            {value: '5', label: 'Besonderheit5'}
          ],
          height: 80,
          width: 200,
          f: $.fn.ebselect.onselchange1
        };
        var opts2 = {
          selectoptions: [
            {value: '1', label: 'xBesonderheit1'},
            {value: '2', label: 'xBesonderheit2'},
            {value: '3', label: 'xBesonderheit3'},
            {value: '4', label: 'xBesonderheit4'},
            {value: '5', label: 'xBesonderheit5'}
          ],
          height: 80,
          width: 200,
          f: $.fn.ebselect.onselchange2

        };
        var data = $("input[name='SpecialFeatureList']").val().split(',');
        $("#select1").ebselect(opts1, data);
        var data2 = $("input[name='list']").val().split(',');
        $("#select2").ebselect(opts2, data2);
      });
    </script>
  </head>
  <body>
    <input name="SpecialFeatureList" value="1,3">
    <div id='select1'></div>
    <input name="list" value="1,3">
    <div id='select2'></div>
  </body>
</html>
