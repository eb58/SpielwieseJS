<!DOCTYPE html>
<html>
  <head>
    <title>TODO supply a title</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel='stylesheet' href='/vendor/font-awesome-4.7.0/css/font-awesome.min.css'/>
    <link rel="stylesheet" href="/vendor/jQueryUI-1.12.0/jquery-ui.css">
    <link rel="stylesheet" href="/css/ebselect.css">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.0.12/dist/css/select2.min.css" rel="stylesheet" />
    <style>
      * {font-family:Arial;color: black;font-size: 12px; }
      table { background-color: #CCCCCC;}
      .ui-datepicker-trigger{ border:none; background:none; }
    </style>
    <script src="/vendor/underscore-1.8.3/underscore-1.8.3.min.js"></script>
    <script src="/vendor/jQuery-1.11.3/jquery-1.11.3.min.js"></script>
    <script src="/vendor/jQueryUI-1.12.0/jquery-ui.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.12/dist/js/select2.min.js"></script>

    <script src="/javascript/polyfill.js"></script>
    <script src='/javascript/jquery-ui-datepicker-de.js'></script>
    <script src='/javascript/jquery-ismed.js'></script>
    <script src="/javascript/eblib/ebutils.js"></script>
    <script src="/javascript/eblib/eblogger.js"></script>
    <script src="/javascript/eblib/ebbind.js"></script>
    <script src="/javascript/eblib/ebdropdown.js"></script>
    <script src="/javascript/eblib/ebtextarea.js"></script>
    <script src="/javascript/eblib/ebradio.js"></script>
    <script src="/javascript/eblib/ebselect.js"></script>
    <script src="/javascript/eblib/ebselect2.js"></script>
    <script src="/javascript/eblib/eblist.js"></script>
    <script>
      var taopts1000 = {title: {}, counter: {}, maxByte: 1000, width: '400px', maxNrOfVisibleRows: 10};

      var radios = [
        {v: 1, text: 'Radio1'},
        {v: 2, text: 'Radio2'},
        {v: 3, text: 'Radio3'}
      ];


      const valueLists = {
        server: ['Server1', 'Server2', 'Server3', 'Server4', 'Server5', 'Server6', 'Server7'],
        haircolor: ['blond', 'braun', 'rot', 'weiß', 'grün', 'aschfahl'],
        tags: ['spannend', 'erotisch', 'langweilig', 'fade', 'zu lang', 'lustig'],
      };

      var data = {
        usr: 'ebrandl',
        pwd: '',
        date: '28.01.2011',
        sec: true,
        srv: 'Server4',
        txt: 'Das ist ein Test\nDas ist ein Test\nDas ist ein Test\nA\nA\nA\nA\nA\nA\nA\nA\nA\nA',
        choice1: 1,
        choice2: 3,
        haircolor1: [2, 3],
        haircolor2: ['blond', 'weiß'],
        tags: [2, 3],
      };

//      function set(key, v) {
//        var x = $('#' + key);
//        var type = x.attr('type');
//        if (type === 'text' || type === 'password') {
//          x.val(v);
//        } else if (type === 'checkbox') {
//          x.attr('checked', v);
//        } else if ($('select', x).length) {
//          $('select', x).selectmenu().val(v).selectmenu('refresh');
//        } else if ($('input:radio', x).length) {
//          $('input:radio#' + v, x).prop('checked', true);
//          $('input:radio', x).checkboxradio('refresh');
//        } else if ($('select', x).length) {
//          // TODO
//        }
//      }
//
      function defineProp(o, oX, key) {
        Object.defineProperty(o, key, {
//          set: function (v) {
//            console.log('setting', key, v);
//            oX[key] = v;
//            set(key, v);
//          },
          get: function () {
            console.log('getting', oX);
            return oX[key];
          }
        });
      }
      var vm = _.extend({}, data);
      data = _.mapObject(data, function (val, key) {
        return defineProp(vm, data, key);
      });

      let tags;

      $(document).ready(function () {
        $('#usr').ebbind(vm);
        $('#pwd').ebbind(vm);
        $('#sec').ebbind(vm);
        $('#date').datepicker(datepickerOptions).ebbind(vm);
        $('#srv').ebdropdown({width: '400px'}, valueLists.server).ebbind(vm);
        $('#choice1').ebradio({}, radios).ebbind(vm);
        $('#choice2').ebradio({}, radios).ebbind(vm);
        $('#txt').ebtextarea(taopts1000).ebbind(vm);
        $('#haircolor1').ebselect({values: valueLists.haircolor}).ebbind(vm);
        $('#haircolor2').ebselect({values: valueLists.haircolor}).ebbind(vm);
        tags = $('#tags').ebselect2({values: valueLists.tags}).ebbind(vm);
      });
    </script>
  </head>
  <body>
    <table>
      <tr><td>User</td><td><input id='usr' type="text"></td></tr>
      <tr><td>Pass</td><td><input id='pwd' type="password"></td></tr>
      <tr><td>Secure</td><td><input id='sec' type="checkbox"></td></tr>
      <tr><td>Date</td><td><input id='date' type="text"></td></tr>
      <tr><td>Serv</td><td><div id='srv'></div></td></tr>
      <tr><td>Auswahl1:</td><td><div id='choice1'></div></td></tr>
      <tr><td>Auswahl2:</td><td><div id='choice2'></div></td></tr>
      <tr><td>Haarfarbe1</td><td><div id='haircolor1'></div></td></tr>
      <tr><td>Haarfarbe2</td><td><div id='haircolor2'></div></td></tr>
      <tr><td>Bemerkung:</td><td><div id='txt'></div></td></tr>
      <tr><td>select2:</td><td><div id='tags'></div></tr>
    </table>
  </body>
</html>
