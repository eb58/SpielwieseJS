<!DOCTYPE html>




<html lang="de">
  <head>
    <title>Hilfsmittel</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="stylesheet" href="/lib/jQueryUI-1.11.4/jquery-ui.min.css"/>
    <link rel="stylesheet" href="/css/ebtable.css"/>

    <style>
      * {font-family:Arial;color: black;font-size: 12px;}
      body{ margin: 20px 20px 20px 20px; }
      table, td { border: 1px solid lightgrey; border-collapse: collapse;padding: 5px 3px ;}
      textarea{ width:500px;}
      .ui-dialog-content label { display: inline-block; vertical-align: baseline; width: 80px;  margin: 5px 2px; font-weight: bold}
      .ui-dialog-content input { display: inline-block; vertical-align: baseline; width: 550px; margin: 5px 2px;}

      .textfield{ margin: 15px 1px 15px 1px; width:600px;}
      .ui-selectmenu-button {width:300px;}
      .ui-selectmenu-menu {height:250px; overflow:auto}

      #orderresponseX { width:500px; }
      #himilist{ margin: 5px 1px 5px 1px; width:500px; float:left;}
      #orderattr{ margin: 5px 10px 5px 10px; width:500px; float:left;}


      .qastbl td:nth-child(2) { width: 500px;}
      .qastbl td { background-color: #dfdfdf;  }
      .qastbl td:nth-child(1) { width:80%;}

      #diagnosen { width: 500px; }
      #diagnosen table, td { border: 1px solid lightgrey; border-collapse: collapse;}
      #diagnosen td:nth-child(1) { width: 10px }   
      #diagnosen td:nth-child(2) { width: 50px }
      #diagnosen td:nth-child(2) input { width: 45px }
      #diagnosen td:nth-child(3) { width: 380px   }
      #diagnosen td:nth-child(3) input { width: 100% }
      #diagnosen td:nth-child(4) { width: 10px  }
      #diagnosen td{ padding: 3px; }
      #diagnosen input{ border: 0px; }


      #versandeinstellungen td, #versandeinstellungen table{ border: 0px;}
      #auftraggeberX, #leistungserbringerX, #sanitaetshausX { width:100%; }

      #suggkeysX { width:500px; }

      #dlgHimi>table td { border-style: none; margin: 0px; padding: 1px 0px 1px 0px;}
      #dlgHimi { background-color: #eeeee0; }

      #dlgIcd  { background-color: #eeeee0; }

      #dlgQas  { background-color: #eeeee8; }
      #dlgQas textarea{ width:500px;}
      #dlgQas table, #dlgQas td { border-style:none; }

      .nebeneinander div {  float: left;  clear: none; }
      div .errors > ul { margin:2px; padding:1px}

    </style>
    <script src='/lib/underscore-1.8.3/underscore-1.8.3.js'></script>
    <script src='/lib/jquery-1.11.3/jquery-1.11.3.js'></script>
    <script src='/lib/jQueryUI-1.11.4/jquery-ui.js'></script>
    <script src='/lib/numeric.js'></script>
    <script src='/js/himi.js'></script>
    <script src='/js/mx.js'></script>
    <script src='/js/ebtable.js'></script>
    <script src='/js/dlgIcd.js'></script>
    <script src='/data/himilists.js'></script>
    <script>
      if (typeof $ !== 'undefined') {
        $.extend({
          alert: function (title, message) {
            message = message || '';
            $("<div id='dlgAlert'></div>").dialog({
              buttons: {
                "Ok": function () {
                  $(this).dialog("close");
                }
              },
              close: function () {
                $(this).remove();
              },
              title: title,
              modal: true,
              closeText: 'Schlie\u00dfen'
            }).html('<br>' + message.replace('\n', '<br>'));
          },
          confirm: function (title, question, callback) {
            question = question || '';
            $("<div id='dlgConfirm'></div>").dialog({
              buttons: {
                "Ja": function () {
                  $(this).dialog("close");
                  callback();
                },
                "Nein": function () {
                  $(this).dialog("close");
                }
              },
              close: function () {
                $(this).remove();
              },
              title: title,
              modal: true,
              closeText: 'Schlie\u00dfen'
            }).html('<br>' + question.replace('\n', '<br>'));
          }
        });
        $(document).ajaxStart(function () {
          $("body").addClass('wait');
        });
        $(document).ajaxStop(function () {
          $("body").removeClass('wait');
        });
      }


      var himis,
              icds,
              acthimirow,
              actqasrow,
              readonly = false;

      function isValidIcdCode(code) {
        return _.find(icdlist, function (o) {
          return o[2] === code;
        });
      }
      function getIcdCodeFromNumber(code) {
        var x = _.find(icdlist, function (o) {
          return o[2] === code;
        });
        return x ? {id: x[0], text: x[1]} : null;
      }

      // ##########################################################################################################
      // Himitabelle
      // ##########################################################################################################
      var rendererHimi = {
        lfdnr: function (data, row, r) {
          return data;
        },
        item: function (data, row) {
          return himiutils.qasTable(row);
        },
        edit: function (data, row, r) {
          return "<span id='himi" + r + "' class='ui-icon ui-icon-pencil'></span>";
        },
        info: function (data, row, r) {
          return "<span id='himi" + r + "' class='ui-icon ui-icon-info'></span>";
        },
        del: function (data, row, r) {
          var isdigital = row[0];
          return isdigital ? "" : "<span id='himi" + r + "' class='ui-icon ui-icon-trash'></span>";
        }
      };

      var himilistopts_edit = {
        columns: [
          {name: "Digital", invisible: true},
          {render: rendererHimi.lfdnr},
          {render: rendererHimi.item},
          {render: rendererHimi.edit},
          {render: rendererHimi.del}
        ]
      };
      var himilistopts_readonly = {
        columns: [
          {name: "Digital", invisible: true},
          {render: rendererHimi.lfdnr},
          {render: rendererHimi.item},
          {render: rendererHimi.info}
        ]
      };

      var himilistopts = readonly ? himilistopts_readonly : himilistopts_edit;

      // ##########################################################################################################
      // QAS-Tabelle
      // ##########################################################################################################
      var rendererQas = {
        motivation: function (data, row) {
          data = data || '';
          return data.length < 500 ? data : (data.substring(0, 500) + '...');
        },
        edit: function (data, row, r) {
          return "<span id='qas" + r + "' class='ui-icon ui-icon-pencil'></span>";
        },
        info: function (data, row, r) {
          return "<span id='qas" + r + "' class='ui-icon ui-icon-info'></span>";
        },
        del: function (data, row, r) {
          var isdigital = row[0];
          return isdigital ? "" : "<span id='qas" + r + "' class='ui-icon ui-icon-trash'></span>";
        }
      };
      var qaslistopts_edit = {
        columns: [
          {name: "Digital", invisible: true},
          {name: "Nummer"},
          {name: "Frage"},
          {name: "Antwort"},
          {name: "Erläuterung Frage", render: rendererQas.motivation},
          {name: "Begründung Antwort", render: rendererQas.motivation},
          {name: '', render: rendererQas.edit},
          {name: '', render: rendererQas.del}
        ]
      };
      var qaslistopts_readonly = {
        columns: [
          {name: "Digital", invisible: true},
          {name: "Nummer"},
          {name: "Frage"},
          {name: "Antwort"},
          {name: "Erläuterung Frage", render: rendererQas.motivation},
          {name: "Begründung Antwort", render: rendererQas.motivation},
          {name: '', render: rendererQas.info}
        ]
      };
      var qaslistopts = readonly ? qaslistopts_readonly : qaslistopts_edit;

      // ##########################################################################################################
      function initBegruendungToolTips() {
        $(".qastbl tr").off().on('mouseenter', function (e) {
          var erlauterungFrage = $('td:nth-child(3)', e.currentTarget).text().trim();
          var begruendungAntwort = $('td:nth-child(4)', e.currentTarget).text().trim();
          console.log('aaa', erlauterungFrage, begruendungAntwort);
          if (erlauterungFrage === '' && begruendungAntwort === '')
            return;
          var t = _.template("<b>Erläuterung Frage:</b><br><\%=b1%><br><b>Begründung Antwort:</b><br><\%=b2%>")
                  ({
                    b1: erlauterungFrage,
                    b2: begruendungAntwort
                  });

          $('#tooltipdlg').dialog({
            title: 'Erläuterung/Begründung',
            closeText: 'Schlie\u00dfen',
            position: {my: 'right top', at: 'right top', of: event},
            open: function () {
              $(".ui-dialog-titlebar-close", $(this).closest('.ui-dialog')).hide();
            } // hide x in titlebar for closing 
          }).dialog('open').html(t);
        });
        $(".qastbl tr").on('mouseleave', function () {
          $('#tooltipdlg').dialog().dialog('close');
        });
      }

      function initHimiTable(himis) {
        var himidata = _.map(himis, function (h) {
          var answ = _.findWhere(answs, {'answer-id': h['answer-id']});
          var answtext = answ ? answ['answer-text'] : '';
          return [h.digital, h['lfd-nr'], h.number + ' ### ' + h.text + ' ### ' + answtext, h.qas];
        });
        $('#grid').himitable(himilistopts, himidata);
        $('#addHimi.ui-icon-circle-plus').toggle(!(readonly || himis.length >= 10));
        initActionsForHimilist();
        initBegruendungToolTips();
      }

      function initQasTable(qas) {
        var qasdata = _.map(qas, function (qa) {
          var answ = _.findWhere(answs, {'answer-id': qa['answer-id']});
          var answtext = answ ? answ['answer-text'] : '';
          return [qa.digital, qa['question-number'], qa['question-text'], answtext, qa['motivation-question'], qa['motivation-answer']];
        });
        $('#qastable').himitable(qaslistopts, qasdata);
        $('#addQas.ui-icon-circle-plus').toggle(!(readonly || qas.length >= 14));
        initActionsForQaslist(qas);
      }

      function initIcdTable(icds) {
        for (var i = 1; i <= 5; i++) {
          var icd = icds[i - 1] || {};
          var code = $($('#icdcode' + i)).val().trim().toUpperCase();
          $('#icdcode' + i).val(icd['icd-code-number']);
          $('#icdtext' + i).val(icd['text']).prop('readonly', code !== '' && code !== '---.-')
          $('#icdcode' + i).prop('disabled', icd.digital);
          $('#icdtext' + i).prop('disabled', icd.digital);
          $('#icdsrch' + i).toggle(!icd.digital);
          $('#icdtrash' + i).toggle(!icd.digital);
        }
        initActionsForIcdlist();
      }
      // ##########################################################################################################

      function initActionsForHimilist() { // Actions for Himilist
        $('.himitable .ui-icon-trash').off().on('click', function (ev) { // delete himi
          $.confirm('Frage', 'Sind Sie sicher, dass Sie das Hilfsmittel löschen wollen?', function () {
            var r = parseInt(ev.target.id.replace('himi', ''));
            himis.splice(r, 1);
            initHimiTable(himis);
          });
        });
        $('#himilist .ui-icon-pencil, #himilist .ui-icon-info').off().on('click', function (ev) { // edit himi
          var r = parseInt(ev.target.id.replace('himi', ''));
          $('#dlgHimi').dialog('option', 'title', 'Hilfsmittel ' + himis[r].text).dialog('open');
          $('#dlgHimi input#himinumber').val(himis[r].number);
          $('#dlgHimi input#himiname').val(himis[r].text);

          $('#dlgHimi #himiresponse').html(himiutils.selectBox('himiresponseX', answs));
          $('#dlgHimi #himiresponseX option[value=' + himis[r]['answer-id'] + ']').attr('selected', true);
          $('#dlgHimi select#himiresponseX').selectmenu().selectmenu(readonly ? 'disable' : 'enable');

          initQasTable(himis[r].qas);
          acthimirow = r;
        });
        $('#himilist #addHimi').off().on('click', function () { // add himi
          var nhimi = himiutils.createHimi('', '');
          nhimi.isnew = true;
          himis.push(nhimi);
          $('#dlgHimi').dialog('option', 'title', 'Neues Hilfsmittel').dialog('open');
          $('#dlgHimi input#himinumber').val('');
          $('#dlgHimi input#himiname').val('');
          var r = himis.length - 1;
          $('#dlgHimi #himiresponse').html(himiutils.selectBox('himiresponseX', answs));

          initQasTable(himis[r].qas);
          acthimirow = r;
        });
      }

      function initActionsForQaslist(qas) {   // Actions for Qaslist
        $('#qastable .ui-icon-trash').off().on('click', function (ev) { // delete qas
          $.confirm('Frage', 'Sind Sie sicher, dass Sie die Frage zum Hilfsmittel löschen wollen?', function () {
            var r = parseInt(ev.target.id.replace('qas', ''));
            var qas = himis[acthimirow].qas;
            qas.splice(r, 1);
            initQasTable(qas);
          });
        });
        $('#qastable .ui-icon-pencil, #qastable .ui-icon-info').off().on('click', function (ev) { // edit qas
          var r = parseInt(ev.target.id.replace('qas', ''));
          var actqas = qas[r];
          actqasrow = r;
          $('#quests').html(himiutils.selectBox('quests', quests));
          $('#answs').html(himiutils.selectBox('answs', answs));
          $('#quests option[value=' + actqas['question-id'] + ']').attr('selected', true);
          $('#answs  option[value=' + actqas['answer-id'] + ']').attr('selected', true);

          $('#dlgQas .selectmenu').selectmenu();
          $('#dlgQas select#quests').selectmenu().selectmenu(readonly || actqas.digital ? 'disable' : 'enable');
          $('#dlgQas select#answs').selectmenu().selectmenu(readonly ? 'disable' : 'enable');

          $('#dlgQas .ui-selectmenu-button').width(500);
          $('#dlgQas #motivation-question').val(actqas['motivation-question']);
          $('#dlgQas #motivation-answer').val(actqas['motivation-answer']);
          if (readonly) {
            $('.selectmenu').selectmenu().selectmenu('disable');
          }
          $('#dlgQas').dialog('option', 'title', 'Frage ' + (r + 1)).dialog('open');
        });
        $('#addQas').off().on('click', function () {  // add qas
          var nqa = himiutils.createQas(-1, $('#dlgQas #motivation-question').val(), $('#dlgQas #motivation-answer').val(), quests[0], answs[0]);
          nqa.isnew = true;
          himis[acthimirow].qas.push(nqa);
          $('#quests').html(himiutils.selectBox('quests', quests));
          $('#answs').html(himiutils.selectBox('answs', answs));
          $('#dlgQas .selectmenu').selectmenu();
          $('#dlgQas .ui-selectmenu-button').width(500);
          $('#dlgQas #motivation-question').val('');
          $('#dlgQas #motivation-answer').val('');
          $('#dlgQas').dialog('option', 'title', 'Neue Frage').dialog('open');
          actqasrow = himis[acthimirow].qas.length - 1;
        });
      }

      function initActionsForIcdlist() {   // Actions for Icdlist
        $('#diagnosen .ui-icon-trash').off().on('click', function (event) { // delete icd
          $.confirm('Frage', 'Sind Sie sicher, dass Sie die Diagnose löschen wollen?', function () {
            var n = event.target.id.replace('icdtrash', '') - 1;
            icds.splice(n, 1);
            icds.push( {'icd-code-id': null, 'icd-code-number': null, digital: false} );
            initIcdTable(icds);
          });
        });
        $('#diagnosen .ui-icon-search').on('click', function (event) {
          var n = event.target.id.replace('icdsrch', '');
          var opts = {icdCode: $('#icdcode' + n).val()};
          dlgIcd(icdlist, function (code, text, id) {
            icds[n - 1] = icds[n - 1] || {'icd-code-id': null, 'icd-code-number': null, digital: false};
            if (!icds[n - 1].digital) {
              icds[n - 1]['icd-code-id'] = id;
              icds[n - 1]['icd-code-number'] = code;
              icds[n - 1]['text'] = code === '---.-' ? $('#icdtext' + n).val() : text;
              $('#icdcode' + n).val(icds[n - 1]['icd-code-number']);
              $('#icdtext' + n).val(icds[n - 1]['text']).prop('readonly', code !== '---.-');
            }
            return true;
          }, opts);
        });
        for (var i = 1; i <= 5; i++) {
          $('#diagnosen #icdcode' + i).on('blur', function (event) {
            var n = event.target.id.replace('icdcode', '');
            var icdCodeNumber = $('#icdcode' + n).val().trim().toUpperCase();
            if (!icdCodeNumber)
              return;
            var icdCode = getIcdCodeFromNumber(icdCodeNumber);
            if (icdCode) {
              icds[n - 1] = icds[n - 1] || {'icd-code-id': null, 'icd-code-number': null, digital: false};
              icds[n - 1]['icd-code-id'] = icdCode.id;
              icds[n - 1]['icd-code-number'] = icdCodeNumber;
              icds[n - 1]['text'] = icdCodeNumber === '---.-' ? $('#icdtext' + n).val() : icdCode.text;
              $('#icdtext' + n).val(icds[n - 1]['text']).prop('readonly', icdCodeNumber !== '---.-');
            }
          });
          $('#icdtext' + i).on('change', function (event) {
            var n = parseInt(event.target.id.replace('icdtext', ''));
            icds[n - 1] = icds[n - 1] || {'icd-code-id': null, 'icd-code-number': null, digital: false};
            icds[n - 1]['text'] = $('#icdtext' + n).val();
            var code = $('#icdcode' + n).val().trim().toUpperCase();
            $('#icdtext' + n).prop('readonly', code !== '' && code !== '---.-');
          });
        }
      }

      function initDialog(data) {
        initHimiTable(data.himis);
        initIcdTable(data.icds);

        // Select Auftrags-Antwort
        $('#orderresponse').html(himiutils.selectBox('orderresponseX', answs));
        $('#orderresponseX option[value=' + data['global-answer-id'] + ']').attr('selected', true);
        $('#orderresponseX').selectmenu({change: function (event, ui) {
            data['global-answer-id'] = answs[ui.item.index]['answer-id'];
          }});

        $('#medical-base').val(data['medical-base']);
        $('#anamnesis').val(data['anamnesis']);
        $('#indication').val(data['indication']);
        $('#evaluation').val(data['evaluation']);
        $('#suggestion-add').val(data['suggestion-add']);
        $('#suggkeys').html(himiutils.selectBox('suggkeysX', sugg));
        $('#suggkeysX option[value=' + data['suggestion-id'] + ']').attr('selected', true);
        $('#suggkeysX').selectmenu({change: function (event, ui) {
            data['suggestion-id'] = sugg[ui.item.index]['himi_suggestion_id'];
          }});

        $('#medical-base,#anamnesis,#indication,#evaluation,#suggestion-add').on("change", function (ev) {
          console.log('change', ev.target.id, $('#' + ev.target.id).val());
          data[ev.target.id] = $('#' + ev.target.id).val();
        });

        $('#auftraggeber').html(himiutils.selectBox('auftraggeberX', deliveryAuftraggeber));
        $('#auftraggeberX option[value=' + data['delivery-config-ag'] + ']').attr('selected', true);
        $('#auftraggeberX').selectmenu({
          change: function (event, ui) {
            var selval = $(event.currentTarget).text().trim();
            data['delivery-config-ag'] = _.findWhere(delivery, {'himi_delivery_config_text': selval})['himi_delivery_config_id'];
          }
        });

        $('#leistungserbringer').html(himiutils.selectBox('leistungserbringerX', deliveryLeistungserbringer));
        $('#leistungserbringerX option[value=' + data['delivery-config-le'] + ']').attr('selected', true);
        $('#leistungserbringerX').selectmenu({
          change: function (event, ui) {
            var selval = $(event.currentTarget).text().trim();
            data['delivery-config-le'] = _.findWhere(delivery, {'himi_delivery_config_text': selval})['himi_delivery_config_id'];
          }
        });

        $('#sanitaetshaus').html(himiutils.selectBox('sanitaetshausX', deliverySanitaetshaus));
        $('#sanitaetshausX option[value=' + data['delivery-config-sa'] + ']').attr('selected', true);
        $('#sanitaetshausX').selectmenu({
          change: function (event, ui) {
            var selval = $(event.currentTarget).text().trim();
            data['delivery-config-sa'] = _.findWhere(delivery, {'himi_delivery_config_text': selval})['himi_delivery_config_id'];
          }
        });


        // isSFB
        isSFB = 1;
        if (isSFB && !$('#icdcode1').val() && !$('#icdtext1').val()) {
          $('#icdtext1').val('Hilfsmitteldiagnose');
        }

        // HIMI-Dialog
        $('#dlgHimi').dialog({title: 'Hilfsmittel', autoOpen: false, height: 500, width: 700, closeText: 'Schlie\u00dfen', modal: true,
          close: function () {
            himis = _.reject(himis, {isnew: true});
          },
          buttons: {
            Ok: function () {
              var err = '';
              err += $('#dlgHimi input#himinumber').val() ? '' : 'Nummer darf nicht leer sein!<br>';
              err += $('#dlgHimi input#himiname').val() ? '' : 'Bezeichnung darf nicht leer sein!<br>';
              if (err) {
                return $.alert('Fehler', err);
              }

              himis[acthimirow]['text'] = $('#dlgHimi input#himiname').val();
              himis[acthimirow]['number'] = $('#dlgHimi input#himinumber').val();
              himis[acthimirow]['answer-id'] = $('#dlgHimi :selected').val() === 'null' ? null : parseInt($('#dlgHimi :selected').val());
              delete himis[acthimirow].isnew;
              initHimiTable(himis);
              $(this).dialog("close");
            },
            Abbrechen: function () {
              $(this).dialog("close");
            }
          }
        });

        // Qas-Dialog
        $('#dlgQas').dialog({title: 'Frage', autoOpen: false, height: 400, width: 620, closeText: 'Schlie\u00dfen', modal: true,
          close: function (event, ui) {
            himis[acthimirow].qas = _.reject(himis[acthimirow].qas, {isnew: true});
          },
          buttons: {
            Ok: function () {
              himis[acthimirow].qas[actqasrow]['motivation-question'] = $('#dlgQas #motivation-question').val();
              himis[acthimirow].qas[actqasrow]['motivation-answer'] = $('#dlgQas #motivation-answer').val();
              _.extend(himis[acthimirow].qas[actqasrow],
                      _.findWhere(quests, {'question-id': parseInt($('#dlgQas select#quests option:selected').val())}),
                      _.findWhere(answs, {'answer-id': parseInt($('#dlgQas select#answs  option:selected').val())})
                      );
              delete himis[acthimirow].qas[actqasrow].isnew;
              initQasTable(himis[acthimirow].qas);
              $(this).dialog("close");
            },
            Abbrechen: function () {
              $(this).dialog("close");
            }
          }
        });

        if (readonly) {
          $("textarea, input").prop('disabled', true);
          $('option:not(:selected)').attr('disabled', true);
          $('#diagnosen td:nth-child(4)').hide();
          $('#orderresponseX').selectmenu().selectmenu(readonly ? 'disable' : 'enable');
          $('#suggkeysX').selectmenu().selectmenu(readonly ? 'disable' : 'enable');
          $('#auftraggeberX').selectmenu().selectmenu(readonly ? 'disable' : 'enable');
          $('#leistungserbringerX').selectmenu().selectmenu(readonly ? 'disable' : 'enable');
          $('#sanitaetshausX').selectmenu().selectmenu(readonly ? 'disable' : 'enable');
        }
      }

      function doSave(data) {
        var ret = '';
        $.ajax({
          url: "/ISmed/ajax/workspace/himi.do?action=save-himi-data",
          async: false,
          data: {data: JSON.stringify(data)},
          type: "POST",
          success: function (result) {
            if (result['error-html']) {
              $.alert('Fehler beim Speichern', result['error-html'] || '????');
              ret = 'ERROR';
            }
          },
          error: function (request, status, error) {
            $.alert(error);
            ret = 'ERROR';
          }
        });
        return ret;
      }

      $(document).ready(function () {
        top.DialogID = "himi";
        $(".positive-integer").numeric({decimal: false, negative: false});
        $('textarea[maxlength]').bind("keyup change", function () {
          var maxlen = $(this).attr('maxlength');
          if ($(this).val().length > maxlen) {
            $(this).val($(this).val().substr(0, maxlen));
          }
        });
        $.ajax({
          url: "/data/himidata.js",
          success: function () {
            himis = result.data.himis;
            icds = result.data.icds;
            initDialog(result.data);
          }
        });
      });
    </script>

  </head>
  <body style="background:#F0F0F0">
    <div id='himilist'>
      <table style='border: none;'>
        <tr>
          <td style='border: none;'><h1>Hilfsmittel:</h1></td>
          <td style='border: none;'><span id='addHimi' class='ui-icon ui-icon-circle-plus'></span></td>
        </tr>
      </table>
      <div id='grid'></div>

      <br>
      <h1>Diagnosen:</h1>
      <div>
        <table id='diagnosen'>
          <tbody>
            <tr><td>*</td><td><input id='icdcode1' type='text'/></td><td><input id='icdtext1' type='text'/></td><td><span id='icdsrch1' class='ui-icon ui-icon-search'></span></td><td><span id='icdtrash1' class='ui-icon ui-icon-trash'></span></td></tr>
            <tr><td> </td><td><input id='icdcode2' type='text'/></td><td><input id='icdtext2' type='text'/></td><td><span id='icdsrch2' class='ui-icon ui-icon-search'></span></td><td><span id='icdtrash2' class='ui-icon ui-icon-trash'></span></td></tr>
            <tr><td> </td><td><input id='icdcode3' type='text'/></td><td><input id='icdtext3' type='text'/></td><td><span id='icdsrch3' class='ui-icon ui-icon-search'></span></td><td><span id='icdtrash3' class='ui-icon ui-icon-trash'></span></td></tr>
            <tr><td> </td><td><input id='icdcode4' type='text'/></td><td><input id='icdtext4' type='text'/></td><td><span id='icdsrch4' class='ui-icon ui-icon-search'></span></td><td><span id='icdtrash4' class='ui-icon ui-icon-trash'></span></td></tr>
            <tr><td> </td><td><input id='icdcode5' type='text'/></td><td><input id='icdtext5' type='text'/></td><td><span id='icdsrch5' class='ui-icon ui-icon-search'></span></td><td><span id='icdtrash5' class='ui-icon ui-icon-trash'></span></td></tr>
          </tbody>
        </table>
      </div>
      <br>
      <h1>Versandeinstellungen:</h1>
      <div id='versandeinstellungen'>
        <table>
          <tr><td>Auftraggeber:     </td><td><div id='auftraggeber'>       </div></td>
          <tr><td>Leistungserbringer</td><td><div id='leistungserbringer'> </div></td>
          <tr><td>Sanitätshaus      </td><td><div id='sanitaetshaus'>      </div></td>
        </table>
      </div>
    </div>

    <div id='orderattr'>
      <h1>Auftrags-Antwort:</h1>
      <div id='orderresponse'></div>
      <div class='textfield'><h1>Medizinische Unterlagen:</h1><textarea id='medical-base' rows='4'  cols='80' maxlength="4000"></textarea></div>
      <div class='textfield'><h1>Anamnese:               </h1><textarea id='anamnesis'    rows='4'  cols='80' maxlength="4000"></textarea></div>
      <div class='textfield'><h1>Befund:                 </h1><textarea id='indication'   rows='4'  cols='80' maxlength="4000"></textarea></div>
      <div class='textfield'><h1>Antwort mit Begründung: </h1><textarea id='evaluation'   rows='10' cols='80' maxlength="10000"></textarea></div>
      <div class='textfield'><h1>Empfehlung:             </h1>
        <div id='suggkeys'></div>
        <textarea id='suggestion-add' rows='4' cols='80' maxlength='4000'></textarea>
      </div>
    </div>

    <div id='dlgHimi'>
      <table style="border-style:none">
        <tr><td>Hilfsmittel-Nummer: </td><td><input id='himinumber' type='text' class='positive-integer' maxlength="10"/></td></tr>
        <tr><td>Bezeichnung:        </td><td><input id='himiname' type='text'/></td></tr>
        <tr><td>Hilfsmittel-Antwort:</td><td><div id='himiresponse'></div></td></tr>
      </table>
      <br>
      <table style='border: none;'>
        <tr>
          <td style='border: none;'><h1>Fragen:&nbsp;&nbsp;&nbsp;</h1></td>
          <td style='border: none;'><span id='addQas' class='ui-icon ui-icon-circle-plus'></span></td>
        </tr>
      </table>

      <div id="qastable"></div>
    </div>

    <div id='dlgQas'>
      <table>
        <tr><td>Frage:     </td><td><div id='quests'></div></td></tr>
        <tr><td>Erläuterung:</td><td><textarea id="motivation-question" rows=5 cols=80 maxlength="1000"></textarea></td></tr>
        <tr><td>Antwort:   </td><td><div id='answs'></div></td></tr>
        <tr><td>Begründung:</td><td><textarea id="motivation-answer" rows=5 cols=80 maxlength="1000"></textarea></td></tr>
      </table>
    </div>

    <div id='tooltipdlg'></div>

    <div id='dlgIcd'>
      <div id="icdgrid"></div>
    </div>

  </body>
</html>